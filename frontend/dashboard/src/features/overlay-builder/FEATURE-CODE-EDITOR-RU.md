# Monaco Code Editor –∏ HTML Preview

**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2024
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Monaco Editor (—Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞ –∏–∑ VS Code) –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HTML —Å–ª–æ—ë–≤, –∞ —Ç–∞–∫–∂–µ –∂–∏–≤–æ–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä HTML –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä—è–º–æ –Ω–∞ —Ö–æ–ª—Å—Ç–µ.

---

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. ‚úÖ Monaco Code Editor

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- –¢—Ä–∏ –≤–∫–ª–∞–¥–∫–∏: HTML, CSS, JavaScript
- –ñ–∏–≤–æ–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- –¢—ë–º–Ω–∞—è —Ç–µ–º–∞, —Å–æ–≤–ø–∞–¥–∞—é—â–∞—è —Å –¥–∏–∑–∞–π–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –†–µ–¥–∞–∫—Ç–æ—Ä –∑–∞–Ω–∏–º–∞–µ—Ç 90% —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞ (–±—ã–ª–æ —Å–ª–∏—à–∫–æ–º —É–∑–∫–æ)
- –í—ã—Å–æ—Ç–∞ 85% —ç–∫—Ä–∞–Ω–∞ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- Split-view: –∫–æ–¥ —Å–ª–µ–≤–∞, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ø—Ä–∞–≤–∞
- –ú–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–ª—è –±–æ–ª—å—à–µ–π –ø–ª–æ—â–∞–¥–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- Sandbox –∏–∑–æ–ª—è—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞

**–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (Monaco):**
- `Ctrl+S` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å (–ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º)
- `Ctrl+F` - –ü–æ–∏—Å–∫ –≤ –∫–æ–¥–µ
- `Ctrl+H` - –ü–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞
- `Ctrl+/` - –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å/—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É
- `Alt+Shift+F` - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
- `Ctrl+Space` - –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

---

### 2. ‚úÖ HTML Layer Preview –Ω–∞ —Ö–æ–ª—Å—Ç–µ

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ñ–∏–≤–æ–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ —Ö–æ–ª—Å—Ç–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —Å–ª–æ—è
- –ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ iframe –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ JavaScript

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–°–ª–æ–π —Å —Ç–∏–ø–æ–º HTML ‚Üí HtmlLayerPreview –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí iframe —Å –∏–∑–æ–ª—è—Ü–∏–µ–π
                                                    ‚Üì
                                    HTML + CSS + JS —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏
```

**Fallback:**
–ï—Å–ª–∏ HTML –ø—É—Å—Ç–æ–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è placeholder: "Empty HTML Layer"

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. CodeEditorDialog.vue

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å Monaco Editor.

**Props:**
```typescript
interface Props {
  open: boolean           // –û—Ç–∫—Ä—ã—Ç –ª–∏ –¥–∏–∞–ª–æ–≥
  layerId?: string        // ID —Å–ª–æ—è
  layerName?: string      // –ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª–æ—è
  html?: string          // HTML –∫–æ–¥
  css?: string           // CSS –∫–æ–¥
  js?: string            // JavaScript –∫–æ–¥
  refreshInterval?: number // –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–µ–∫—É–Ω–¥—ã)
}
```

**Events:**
```typescript
emit('update:open', false)  // –ó–∞–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥
emit('save', {              // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
  html: string,
  css: string,
  js: string,
  refreshInterval: number
})
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Edit HTML Layer - Layer Name                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [Refresh: 5s] [Preview‚ñº] ‚îÇ                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§        Preview           ‚îÇ
‚îÇ [HTML] [CSS] [JS]        ‚îÇ                          ‚îÇ
‚îÇ                          ‚îÇ                          ‚îÇ
‚îÇ  Monaco Editor           ‚îÇ      <iframe>            ‚îÇ
‚îÇ  (–ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞)  ‚îÇ                          ‚îÇ
‚îÇ                          ‚îÇ                          ‚îÇ
‚îÇ                          ‚îÇ                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    [Cancel] [Save Changes]          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–∞–∑–º–µ—Ä—ã:**
- –®–∏—Ä–∏–Ω–∞: 90vw (–±—ã–ª–æ max-w-4xl, —Å—Ç–∞–ª–æ –Ω–∞–º–Ω–æ–≥–æ —à–∏—Ä–µ)
- –í—ã—Å–æ—Ç–∞: 85vh
- Preview –ø–∞–Ω–µ–ª—å: 500px (–º–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å)

---

### 2. HtmlLayerPreview.vue

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ HTML –Ω–∞ —Ö–æ–ª—Å—Ç–µ.

**Props:**
```typescript
interface Props {
  html?: string      // HTML –∫–æ–Ω—Ç–µ–Ω—Ç
  css?: string       // CSS —Å—Ç–∏–ª–∏
  js?: string        // JavaScript –∫–æ–¥
  width: number      // –®–∏—Ä–∏–Ω–∞ —Å–ª–æ—è
  height: number     // –í—ã—Å–æ—Ç–∞ —Å–ª–æ—è
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç iframe –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä
- Sandbox: `allow-scripts allow-same-origin`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ JS –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
- Pointer events –æ—Ç–∫–ª—é—á–µ–Ω—ã (–Ω–µ–ª—å–∑—è –∫–ª–∏–∫–∞—Ç—å)

**–ü—Ä–∏–º–µ—Ä HTML —à–∞–±–ª–æ–Ω–∞:**
```html
<!DOCTYPE html>
<html>
<head>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: transparent; color: #fff; }
    /* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π CSS */
  </style>
</head>
<body>
  <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π HTML -->
  <script>
    try {
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π JS
    } catch (e) {
      console.error('Layer JS Error:', e);
    }
  </script>
</body>
</html>
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Canvas

```vue
<!-- Canvas.vue -->
<div v-for="layer in layers" :key="layer.id">
  <!-- HTML Layer Preview -->
  <HtmlLayerPreview
    v-if="layer.type === 'HTML'"
    :html="layer.settings?.htmlOverlayHtml"
    :css="layer.settings?.htmlOverlayCss"
    :js="layer.settings?.htmlOverlayJs"
    :width="layer.width"
    :height="layer.height"
  />

  <!-- Fallback –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ -->
  <div v-else>
    {{ layer.name }}
  </div>
</div>
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞

1. **–°–ø–æ—Å–æ–± 1:** –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ HTML —Å–ª–æ–π
2. **–°–ø–æ—Å–æ–± 2:** –í—ã–±—Ä–∞—Ç—å —Å–ª–æ–π ‚Üí Properties panel ‚Üí –∫–Ω–æ–ø–∫–∞ "Edit Code"
3. **–°–ø–æ—Å–æ–± 3:** –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí "Edit Code" (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

1. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
2. –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ HTML/CSS/JS
3. –ö–æ–¥ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. Preview –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
5. –ò–∑–º–µ–Ω–∏—Ç–µ Refresh Interval –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
6. –ù–∞–∂–º–∏—Ç–µ "Save Changes" –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞ —Ö–æ–ª—Å—Ç–µ

1. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞ —Ö–æ–ª—Å—Ç–µ
2. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä
3. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
4. –û—à–∏–±–∫–∏ JS –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Monaco Editor Configuration

```typescript
{
  automaticLayout: true,       // –ê–≤—Ç–æ-–ø–æ–¥–≥–æ–Ω–∫–∞ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä
  minimap: { enabled: false }, // –ë–µ–∑ –º–∏–Ω–∏–∫–∞—Ä—Ç—ã
  fontSize: 14,
  lineNumbers: 'on',
  scrollBeyondLastLine: false,
  wordWrap: 'on',
  tabSize: 2,
}
```

### CDN –¥–ª—è Monaco

Monaco –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å CDN (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `main.ts`):
```typescript
VueMonacoEditorPlugin.install(app, {
  paths: {
    vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.52.0/min/vs',
  },
})
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**iframe sandbox:**
- `allow-scripts` - —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã
- `allow-same-origin` - –¥–æ—Å—Ç—É–ø –∫ localStorage/etc
- –ù–µ—Ç `allow-forms` - —Ñ–æ—Ä–º—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã
- –ù–µ—Ç `allow-popups` - –ø–æ–ø–∞–ø—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã

**–ò–∑–æ–ª—è—Ü–∏—è:**
- –ö–∞–∂–¥—ã–π —Å–ª–æ–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º iframe
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ parent window
- –û—à–∏–±–∫–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- Try-catch –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π JS

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- Debounce –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π preview (–±—ã–ª–æ 300ms, —É–±—Ä–∞–ª–∏ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ—Å—Ç–∏)
- Lazy loading Monaco Editor (–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)
- iframe –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (document.write –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è)
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ CSS transform (GPU accelerated)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ú–Ω–æ–≥–æ HTML —Å–ª–æ—ë–≤ (10+) –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä
- –°–ª–æ–∂–Ω—ã–π JS –º–æ–∂–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å preview
- –ë–æ–ª—å—à–∏–µ iframe'—ã —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏

---

## –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. Closing Script Tag –≤ Template Literals

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
const html = `<script>code</script>` // ‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
const html = `<script>code${'<'}/script>` // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
```

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–±–∏–≤–∞—Ç—å closing tag, —á—Ç–æ–±—ã Vue SFC parser –Ω–µ —Å–ø—É—Ç–∞–ª —Å –∫–æ–Ω—Ü–æ–º script –±–ª–æ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

### 2. –†–∞–∑–º–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

**–ë—ã–ª–æ:**
```vue
<DialogContent class="max-w-4xl h-[80vh]">
```
- –°–ª–∏—à–∫–æ–º —É–∑–∫–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- –ù–µ—É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–¥–æ–º

**–°—Ç–∞–ª–æ:**
```vue
<DialogContent class="max-w-[90vw] w-[90vw] h-[85vh]">
```
- –ó–∞–Ω–∏–º–∞–µ—Ç 90% —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞
- –ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –≤—ã—Å–æ—Ç–∞ 85vh
- –ú–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –∫–æ–¥–∞ –∏ preview

### 3. Preview –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
Watch –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ props.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
watch([() => props.html, () => props.css, () => props.js], () => {
  updateContent()
}, { immediate: false })
```

### 4. Iframe scaling

**–ü—Ä–æ–±–ª–µ–º–∞:**
iframe –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–ª—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —Å–ª–æ—è.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
const scaleValue = computed(() => {
  return Math.min(1, 100 / Math.max(props.width, props.height))
})
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑–º–µ—Ä–µ > 100px.

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–æ–π —Å—á—ë—Ç—á–∏–∫

**HTML:**
```html
<div class="counter">
  <h1 id="count">0</h1>
  <button onclick="increment()">+</button>
</div>
```

**CSS:**
```css
.counter {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding: 30px;
}

h1 {
  font-size: 72px;
  color: #00ff00;
  text-shadow: 0 0 20px #00ff00;
}

button {
  padding: 10px 30px;
  font-size: 24px;
  background: #333;
  color: white;
  border: 2px solid #00ff00;
  cursor: pointer;
}
```

**JavaScript:**
```javascript
let count = 0;

function increment() {
  count++;
  document.getElementById('count').textContent = count;
}
```

### –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞

**HTML:**
```html
<div class="timer">
  <span id="time">10:00</span>
</div>
```

**CSS:**
```css
.timer {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  font-size: 120px;
  font-weight: bold;
  color: #ff0000;
  text-shadow: 0 0 30px #ff0000;
}
```

**JavaScript:**
```javascript
let seconds = 600; // 10 –º–∏–Ω—É—Ç

setInterval(() => {
  seconds--;
  if (seconds < 0) seconds = 0;

  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;

  document.getElementById('time').textContent =
    `${mins}:${secs.toString().padStart(2, '0')}`;
}, 1000);
```

### Twitch –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Twir –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```html
<div class="stats">
  <p>Uptime: $(stream.uptime)</p>
  <p>Viewers: $(stream.viewers)</p>
  <p>Followers: $(channel.followers)</p>
</div>
```

**Refresh Interval:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 —Å–µ–∫—É–Ω–¥) –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. Monaco Editor —Ä–∞–∑–º–µ—Ä

- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å CDN (~3MB –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ–π
- –ö—ç—à–∏—Ä—É–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

### 2. iframe –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ parent window
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å alert/confirm/prompt
- localStorage –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Twir API –Ω–∞–ø—Ä—è–º—É—é

### 3. JavaScript –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

- –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã –º–æ–≥—É—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å UI
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Node.js –º–æ–¥—É–ª—è–º
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è sandbox
- –û—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª–∏

### 4. Preview —Ç–æ—á–Ω–æ—Å—Ç—å

- Preview –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞
- –†–∞–∑–º–µ—Ä—ã –≤ preview –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç 1:1 —Å —Ö–æ–ª—Å—Ç–æ–º
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É

---

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ (autosave)
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –∫–æ–¥–∞
- [ ] Snippets –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- [ ] –¢–µ–º—ã –¥–ª—è Monaco (light/dark/custom)

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞
- [ ] Prettier —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞
- [ ] TypeScript –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ
- [ ] –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (real-time)
- [ ] AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
- [ ] –î–µ–±–∞–≥–≥–µ—Ä –¥–ª—è JavaScript
- [ ] Performance –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä
- [ ] –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Monaco

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
window.monaco // –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä–µ–∫—Ç
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ iframe

```javascript
// –ù–∞–π—Ç–∏ –≤—Å–µ iframe'—ã —Å–ª–æ—ë–≤
document.querySelectorAll('[id^="layer-"] iframe')
```

### –õ–æ–≥–∏ –æ—à–∏–±–æ–∫

–í—Å–µ JS –æ—à–∏–±–∫–∏ –∏–∑ —Å–ª–æ—ë–≤ –≤—ã–≤–æ–¥—è—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º:
```
Layer JS Error: <–æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏>
Preview JS Error: <–æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏>
```

### Hard Refresh

–ï—Å–ª–∏ Monaco –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:
1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
2. Hard refresh (Ctrl+Shift+R)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CDN –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

---

## –§–∞–π–ª—ã

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `components/CodeEditorDialog.vue` - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (300 —Å—Ç—Ä–æ–∫)
- `components/HtmlLayerPreview.vue` - Preview –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (120 —Å—Ç—Ä–æ–∫)

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `OverlayBuilder.vue` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- `Canvas.vue` - –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML preview
- `PropertiesPanel.vue` - –ö–Ω–æ–ø–∫–∞ "Edit Code"

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Monaco Code Editor –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- üé® –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —É—Ä–æ–≤–Ω—è VS Code
- üëÅÔ∏è –ñ–∏–≤–æ–π preview –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (90% —ç–∫—Ä–∞–Ω–∞)
- üîí –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ iframe
- ‚ö° –ë—ã—Å—Ç—Ä—ã–π –∏ –æ—Ç–∑—ã–≤—á–∏–≤—ã–π
- üéØ –£–¥–æ–±–Ω—ã–π UX —Å split-view

**–ì–æ—Ç–æ–≤–æ –∫ production:** ‚úÖ

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –î–µ–∫–∞–±—Ä—å 2024
**–ê–≤—Ç–æ—Ä:** AI Assistant
